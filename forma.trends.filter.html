<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>forma.trends.filter documentation</title></head><body><div id="header"><h1><a href="index.html">Forma 0.2.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3>Namespaces</h3><ul><li><a href="forma.classify.logistic.html">forma.classify.logistic</a></li><li><a href="forma.date-time.html">forma.date-time</a></li><li><a href="forma.hadoop.cli.html">forma.hadoop.cli</a></li><li><a href="forma.hadoop.io.html">forma.hadoop.io</a></li><li><a href="forma.hadoop.jobs.forma.html">forma.hadoop.jobs.forma</a></li><li><a href="forma.hadoop.jobs.modis.html">forma.hadoop.jobs.modis</a></li><li><a href="forma.hadoop.jobs.preprocess.html">forma.hadoop.jobs.preprocess</a></li><li><a href="forma.hadoop.jobs.scatter.html">forma.hadoop.jobs.scatter</a></li><li><a href="forma.hadoop.jobs.timeseries.html">forma.hadoop.jobs.timeseries</a></li><li><a href="forma.hadoop.pail.html">forma.hadoop.pail</a></li><li><a href="forma.hadoop.predicate.html">forma.hadoop.predicate</a></li><li><a href="forma.matrix.jblas.html">forma.matrix.jblas</a></li><li><a href="forma.matrix.utils.html">forma.matrix.utils</a></li><li><a href="forma.matrix.walk.html">forma.matrix.walk</a></li><li><a href="forma.postprocess.output.html">forma.postprocess.output</a></li><li><a href="forma.postprocess.select.html">forma.postprocess.select</a></li><li><a href="forma.reproject.html">forma.reproject</a></li><li><a href="forma.schema.html">forma.schema</a></li><li><a href="forma.source.fire.html">forma.source.fire</a></li><li><a href="forma.source.hdf.html">forma.source.hdf</a></li><li><a href="forma.source.rain.html">forma.source.rain</a></li><li><a href="forma.source.static.html">forma.source.static</a></li><li><a href="forma.source.tilesets.html">forma.source.tilesets</a></li><li><a href="forma.static.html">forma.static</a></li><li><a href="forma.testing.html">forma.testing</a></li><li><a href="forma.trends.analysis.html">forma.trends.analysis</a></li><li class="current"><a href="forma.trends.filter.html">forma.trends.filter</a></li><li><a href="forma.trends.stretch.html">forma.trends.stretch</a></li><li><a href="forma.utils.html">forma.utils</a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="forma.trends.filter.html#var-act-on-good">act-on-good</a></li><li><a href="forma.trends.filter.html#var-bad-ends">bad-ends</a></li><li><a href="forma.trends.filter.html#var-harmonic-seasonal-decomposition">harmonic-seasonal-decomposition</a></li><li><a href="forma.trends.filter.html#var-harmonic-series">harmonic-series</a></li><li><a href="forma.trends.filter.html#var-hp-filter">hp-filter</a></li><li><a href="forma.trends.filter.html#var-hp-mat">hp-mat</a></li><li><a href="forma.trends.filter.html#var-interpolate">interpolate</a></li><li><a href="forma.trends.filter.html#var-k-harmonic-matrix">k-harmonic-matrix</a></li><li><a href="forma.trends.filter.html#var-make-reliable">make-reliable</a></li><li><a href="forma.trends.filter.html#var-mask">mask</a></li><li><a href="forma.trends.filter.html#var-neutralize-ends">neutralize-ends</a></li><li><a href="forma.trends.filter.html#var-replace-index-set">replace-index-set</a></li><li><a href="forma.trends.filter.html#var-stretch-ts">stretch-ts</a></li></ul></div><div class="namespace-docs" id="content"><h2>forma.trends.filter documentation</h2><pre class="doc"></pre><div class="public" id="var-act-on-good"><h3>act-on-good</h3><div class="usage"><code>(act-on-good f coll)</code></div><pre class="doc">apply function `func` to all non-nil values within a collection `coll`
</pre></div><div class="public" id="var-bad-ends"><h3>bad-ends</h3><div class="usage"><code>(bad-ends bad-set coll)</code></div><pre class="doc">make a set of indices of a collection `coll` for which there are
continuous *bad* values, given by the set of values in `bad-set`
which serves as a predicate function to (effectively) filter `coll`
on the ends.  If there are no bad values on either end, then the
function will return an empty set.</pre></div><div class="public" id="var-harmonic-seasonal-decomposition"><h3>harmonic-seasonal-decomposition</h3><div class="usage"><code>(harmonic-seasonal-decomposition freq k coll)</code></div><pre class="doc">returns a deseasonalized time-series; input frequency of
data (e.g., 23 for 16-day intervals), number of harmonic terms (use
3 to replicate procedure in the Verbesselt (2010)), and the
time-series.

Reference:
Verbesselt, J. et al. (2010) Phenological Change Detection while
Accounting for Abrupt and Gradual Trends in Satellite Image Time
Series, Remote Sensing of Environment, 114(12), 2970-298</pre></div><div class="public" id="var-harmonic-series"><h3>harmonic-series</h3><div class="usage"><code>(harmonic-series freq coll k)</code></div><pre class="doc">returns a vector of scaled cosine and sine series of the same
length as `coll`; the scalar is the harmonic coefficient</pre></div><div class="public" id="var-hp-filter"><h3>hp-filter</h3><div class="usage"><code>(hp-filter lambda ts)</code></div><pre class="doc">return a smoothed time series, given the original time series and
 H-P filter parameter (lambda); from the following reference, we calculate
 inv(lambdaF + I)*y

Reference: http://goo.gl/VC7jJ</pre></div><div class="public" id="var-hp-mat"><h3>hp-mat</h3><div class="usage"><code>(hp-mat T)</code></div><pre class="doc">returns the matrix of coefficients from the minimization problem
required to parse the trend component from a time-series of length
`T`, which has to be greater than or equal to 9 periods.</pre></div><div class="public" id="var-interpolate"><h3>interpolate</h3><div class="usage"><code>(interpolate x1 x2 length)</code></div><pre class="doc">calculate a linear interpolation between `x1` and `x2` with the specified
`length` between them.</pre></div><div class="public" id="var-k-harmonic-matrix"><h3>k-harmonic-matrix</h3><div class="usage"><code>(k-harmonic-matrix freq k coll)</code></div><pre class="doc">returns an N x (2*k) matrix of harmonic series, where N is the
length of `coll` and `k` is the number of harmonic terms.</pre></div><div class="public" id="var-make-reliable"><h3>make-reliable</h3><div class="usage"><code>(make-reliable bad-set good-set quality-coll value-coll)</code></div><pre class="doc">This function has two parts: (1) replace bad values at the ends
with the average of the reliable values in the target coll,
`value-coll`. (2) smooth over *bad* values, given by `bad-set`,
which are determined based on the reliability (or quality)
collection, `quality-coll`.  The `good-set` parameter is a set of
passable values, presumably interchangeable.  If this assumption is
not true, then an adjustment will have to be made to this function.</pre></div><div class="public" id="var-mask"><h3>mask</h3><div class="usage"><code>(mask pred coll1 coll2)</code></div><pre class="doc">create a new vector where values from `coll1` are only passed through
if they satisfy the predicate `pred` for `coll2`.  All other values are
set to nil.</pre></div><div class="public" id="var-neutralize-ends"><h3>neutralize-ends</h3><div class="usage"><code>(neutralize-ends bad-set reli-coll val-coll)</code></div><pre class="doc">replace the ends of a value-collection (like NDVI) if the ends are unreliable,
according to an associated reliability index, manifest in `reli-test`. if there
are no bad values (as indicated by `bad-set` values in `reli-coll`) then
`neutralize-ends` will return the original time-series. `bad-set` is a set of
`reli-coll` values that indicate unreliable pixels.</pre></div><div class="public" id="var-replace-index-set"><h3>replace-index-set</h3><div class="usage"><code>(replace-index-set idx-set new-val coll)</code></div><pre class="doc">replace values in `coll` with `new-val` for all indices in
`idx-set`</pre></div><div class="public" id="var-stretch-ts"><h3>stretch-ts</h3><div class="usage"><code>(stretch-ts ts [left right])</code></div><pre class="doc">stretch time-series across bad values if the left and right values of a
tuple are not sequential.  The original time-series is `ts` and the tuples
are a moving window (from `partition 2 1`) based on the valid values from
an associated time-series of reliability values.</pre></div></div></body></html>