<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>forma.schema documentation</title></head><body><div id="header"><h1><a href="index.html">Forma 0.2.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3>Namespaces</h3><ul><li><a href="forma.classify.logistic.html">forma.classify.logistic</a></li><li><a href="forma.date-time.html">forma.date-time</a></li><li><a href="forma.hadoop.cli.html">forma.hadoop.cli</a></li><li><a href="forma.hadoop.io.html">forma.hadoop.io</a></li><li><a href="forma.hadoop.jobs.forma.html">forma.hadoop.jobs.forma</a></li><li><a href="forma.hadoop.jobs.modis.html">forma.hadoop.jobs.modis</a></li><li><a href="forma.hadoop.jobs.preprocess.html">forma.hadoop.jobs.preprocess</a></li><li><a href="forma.hadoop.jobs.scatter.html">forma.hadoop.jobs.scatter</a></li><li><a href="forma.hadoop.jobs.timeseries.html">forma.hadoop.jobs.timeseries</a></li><li><a href="forma.hadoop.pail.html">forma.hadoop.pail</a></li><li><a href="forma.hadoop.predicate.html">forma.hadoop.predicate</a></li><li><a href="forma.matrix.jblas.html">forma.matrix.jblas</a></li><li><a href="forma.matrix.utils.html">forma.matrix.utils</a></li><li><a href="forma.matrix.walk.html">forma.matrix.walk</a></li><li><a href="forma.postprocess.output.html">forma.postprocess.output</a></li><li><a href="forma.postprocess.select.html">forma.postprocess.select</a></li><li><a href="forma.reproject.html">forma.reproject</a></li><li class="current"><a href="forma.schema.html">forma.schema</a></li><li><a href="forma.source.fire.html">forma.source.fire</a></li><li><a href="forma.source.hdf.html">forma.source.hdf</a></li><li><a href="forma.source.rain.html">forma.source.rain</a></li><li><a href="forma.source.static.html">forma.source.static</a></li><li><a href="forma.source.tilesets.html">forma.source.tilesets</a></li><li><a href="forma.static.html">forma.static</a></li><li><a href="forma.testing.html">forma.testing</a></li><li><a href="forma.trends.analysis.html">forma.trends.analysis</a></li><li><a href="forma.trends.filter.html">forma.trends.filter</a></li><li><a href="forma.trends.stretch.html">forma.trends.stretch</a></li><li><a href="forma.utils.html">forma.utils</a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="forma.schema.html#var-add-fires">add-fires</a></li><li><a href="forma.schema.html#var-adjust">adjust</a></li><li><a href="forma.schema.html#var-adjust-fires">adjust-fires</a></li><li><a href="forma.schema.html#var-adjust-timeseries">adjust-timeseries</a></li><li><a href="forma.schema.html#var-boundaries">boundaries</a></li><li><a href="forma.schema.html#var-chunk-location">chunk-location</a></li><li><a href="forma.schema.html#var-chunk-value">chunk-value</a></li><li><a href="forma.schema.html#var-chunkloc-%3Epixloc">chunkloc-&gt;pixloc</a></li><li><a href="forma.schema.html#var-combine-neighbors">combine-neighbors</a></li><li><a href="forma.schema.html#var-fire-value">fire-value</a></li><li><a href="forma.schema.html#var-forma-seq">forma-seq</a></li><li><a href="forma.schema.html#var-forma-value">forma-value</a></li><li><a href="forma.schema.html#var-merge-neighbors">merge-neighbors</a></li><li><a href="forma.schema.html#var-neighbor-value">neighbor-value</a></li><li><a href="forma.schema.html#var-pixel-location">pixel-location</a></li><li><a href="forma.schema.html#var-timeseries-value">timeseries-value</a></li><li><a href="forma.schema.html#var-unpack-chunk-location">unpack-chunk-location</a></li><li><a href="forma.schema.html#var-unpack-chunk-val">unpack-chunk-val</a></li><li><a href="forma.schema.html#var-unpack-neighbor-val">unpack-neighbor-val</a></li><li><a href="forma.schema.html#var-unpack-pixel-location">unpack-pixel-location</a></li></ul></div><div class="namespace-docs" id="content"><h2>forma.schema documentation</h2><pre class="doc"></pre><div class="public" id="var-add-fires"><h3>add-fires</h3><div class="usage"><code>(add-fires &amp; f-tuples)</code></div><pre class="doc">Returns a new `fire-value` object generated by summing up the fields
of each of the supplied `fire-value` objects.

  (schema/add-fires
   {:temp-330 1, :conf-50 0, :both-preds 3, :count 4}
   {:temp-330 1, :conf-50 0, :both-preds 3, :count 4})
  ;=&gt; {:count 8, :conf-50 0, :temp-330 2, :both-preds 6}</pre></div><div class="public" id="var-adjust"><h3>adjust</h3><div class="usage"><code>(adjust &amp; pairs)</code></div><pre class="doc">Appropriately truncates the incoming timeseries values (paired with
the initial integer period), and outputs a new start and both
truncated series. For example:

  (adjust 0 [1 2 3 4] 1 [2 3 4 5])
  ;=&gt; (1 [2 3 4] [2 3 4])</pre></div><div class="public" id="var-adjust-fires"><h3>adjust-fires</h3><div class="usage"><code>(adjust-fires {:keys [est-start est-end t-res]} f-series)</code></div><pre class="doc">Returns the section of fires data found appropriate based on the
information in the estimation parameter map.

  (let [est-map {:est-start &quot;2005-12-01&quot;
                 :est-end &quot;2011-04-01&quot;
                 :t-res &quot;32&quot;
                 :neighbors 1
                 :window-dims [600 600]
                 :vcf-limit 25
                 :long-block 15
                 :window 5}
        f-series []]
  ;=&gt; (adjust-fires est-map f-series)</pre></div><div class="public" id="var-adjust-timeseries"><h3>adjust-timeseries</h3><div class="usage"><code>(adjust-timeseries &amp; tseries)</code></div><pre class="doc">Takes in any number of timeseries objects, and returns a new
sequence of appropriately truncated TimeSeries objects generated
from the temporal overlap of the input timeseries objects.

 (schema/adjust-timeseries (schema/timeseries-value 0 [1 2 3])
                           (schema/timeseries-value 1 [1 2 3 4]))
 ;=&gt; [{:start-idx 1,
       :end-idx 2,
       :series [2 3]}
      {:start-idx 1,
       :end-idx 2,
       :series [1 2]}]</pre></div><div class="public" id="var-boundaries"><h3>boundaries</h3><div class="usage"><code>(boundaries pair-seq)</code></div><pre class="doc">Accepts a sequence of pairs of &lt;initial time period, collection&gt;
and returns the maximum start period and the minimum end period. For
example:

  (boundaries [0 [1 2 3 4] 1 [2 3 4 5]]) =&gt; [1 4]</pre></div><div class="public" id="var-chunk-location"><h3>chunk-location</h3><div class="usage"><code>(chunk-location spatial-res mod-h mod-v idx size)</code></div><pre class="doc">Creates a chunk-location object.

(chunk-location &quot;1000&quot; 28 9 59 24000)
;=&gt; {:spatial-res &quot;1000&quot;, :mod-h 28, :mod-v 9, :index 59, :size 24000}</pre></div><div class="public" id="var-chunk-value"><h3>chunk-value</h3><div class="usage"><code>(chunk-value dataset t-res date location data-value)</code></div><pre class="doc">Creates a chunk-value object.

 Example:
  (let [size 24000
        location (chunk-location &quot;1000&quot; 8 6 0 24000)
        data (range size)]
   (chunk-value &quot;ndvi&quot; &quot;32&quot; &quot;2006-01-01&quot; location (take 10 data))

;=&gt; {:date &quot;2006-01-01&quot;
     :temporal-res &quot;32&quot;
     :location {:spatial-res &quot;1000&quot;, :mod-h 8, :mod-v 6, :index 0, :size 24000}     :dataset &quot;ndvi&quot;
     :value [0 1 2 3 4 5 6 7 8 9]}</pre></div><div class="public" id="var-chunkloc-%3Epixloc"><h3>chunkloc-&gt;pixloc</h3><div class="usage"><code>(chunkloc-&gt;pixloc {:keys [spatial-res size index mod-h mod-v]} pix-idx)</code></div><pre class="doc">Accepts a chunk location and a pixel index within that location and
returns a pixel location.

  (chunkloc-&gt;pixloc
   {:spatial-res &quot;1000&quot;, :mod-h 28, :mod-v 9, :index 59, :size 24000}
   23999)

 ;=&gt; {:spatial-res &quot;1000&quot;, :mod-h 28, :mod-v 9, :sample 1199, :line 1199}</pre></div><div class="public" id="var-combine-neighbors"><h3>combine-neighbors</h3><div class="usage"><code>(combine-neighbors [x &amp; more])</code></div><pre class="doc">Returns a new forma neighbor value generated by merging together
each entry in the supplied sequence of forma values.</pre></div><div class="public" id="var-fire-value"><h3>fire-value</h3><div class="usage"><code>(fire-value t-above-330 c-above-50 both-preds count)</code></div><pre class="doc">Creates a `fire-value` object with counts of fires meeting certain criteria:
temp &gt;= 330
confidence &gt;= 50
both temp and confidence
total fires

(schema/fire-value 1 0 3 4)
;=&gt; {:temp-330 1, :conf-50 0, :both-preds 3, :count 4}</pre></div><div class="public" id="var-forma-seq"><h3>forma-seq</h3><div class="usage"><code>(forma-seq &amp; in-series)</code></div><pre class="doc">Accepts a number of timeseries of equal length and starting
position, and converts the first entry in each timeseries to a forma
value, for all first values and on up the sequence. Series must be
supplied as specified by the arguments for `forma-value`. For
example:

  (forma-seq fire-series short-series long-series t-stat-series)</pre></div><div class="public" id="var-forma-value"><h3>forma-value</h3><div class="usage"><code>(forma-value fire short param-break long t-stat)</code></div><pre class="doc">Returns a vector containing a FireValue, short-term drop,
parametrized break, long-term drop and t-stat of the short-term
drop.</pre></div><div class="public" id="var-merge-neighbors"><h3>merge-neighbors</h3><div class="usage"><code>(merge-neighbors neighbors forma-val)</code></div><pre class="doc">Merges the supplied instance of `FormaValue` into the existing
aggregate collection of `FormaValue`s represented by
`neighbor-val`. (`neighbors` must be an instance of
neighbor-value)</pre></div><div class="public" id="var-neighbor-value"><h3>neighbor-value</h3><div class="usage"><code>(neighbor-value [fire short param long t-stat])</code><code>(neighbor-value fire neighbors avg-short min-short avg-param min-param avg-long min-long avg-stat min-stat)</code></div><pre class="doc">Accepts either a forma value or a sequence of sub-values.
</pre></div><div class="public" id="var-pixel-location"><h3>pixel-location</h3><div class="usage"><code>(pixel-location spatial-res mod-h mod-v sample line)</code></div><pre class="doc">Creates a pixel-location object.

(pixel-location &quot;1000&quot; 28 9 1199 10)
;=&gt; {:spatial-res &quot;1000&quot;, :mod-h 28, :mod-v 9, :sample 1199, :line 10}</pre></div><div class="public" id="var-timeseries-value"><h3>timeseries-value</h3><div class="usage"><code>(timeseries-value start-idx series)</code><code>(timeseries-value start-idx end-idx series)</code></div><pre class="doc">Takes a period index &gt; 0 `start-idx` and a time series `series`,
outputs same plus `end-idx` calculated by counting the number of
elements in `series`.

   (timeseries-value 0 [1 2 3])
   ;=&gt; {:start-idx 0
        :end-idx 2
        :series [1 2 3]}</pre></div><div class="public" id="var-unpack-chunk-location"><h3>unpack-chunk-location</h3><div class="usage"><code>(unpack-chunk-location loc)</code></div><pre class="doc">Unpacks chunk-location object into a tuple.

(unpack-chunk-location
 {:spatial-res &quot;1000&quot;, :mod-h 28, :mod-v 9, :index 4, :size 24000})
;=&gt; [&quot;1000&quot; 28 9 4 24000]</pre></div><div class="public" id="var-unpack-chunk-val"><h3>unpack-chunk-val</h3><div class="usage"><code>(unpack-chunk-val chunk)</code></div><pre class="doc">Used by timeseries. Unpacks a chunk object. Returns `[dataset-name
t-res date location collection]`, where collection is a vector and
location is a `chunk-location`.

  Example:

 (schema/unpack-chunk-val {:date &quot;2006-01-01&quot;
                           :temporal-res &quot;32&quot;
                           :location {:spatial-res &quot;1000&quot;
                                      :mod-h 8
                                      :mod-v 6
                                      :index 0
                                      :size 24000}
                           :dataset &quot;ndvi&quot;
                           :value [0 1 2 3 4 5 6 7 8 9]})   
 ;=&gt; [&quot;ndvi&quot; &quot;32&quot; &quot;2006-01-01&quot; {:mod-h 8, :size 24000, :mod-v 6, :spatial-res &quot;1000&quot;, :index 0} [0 1 2 3 4 5 6 7 8 9]</pre></div><div class="public" id="var-unpack-neighbor-val"><h3>unpack-neighbor-val</h3><div class="usage"><code>(unpack-neighbor-val neighbor-val)</code></div><pre class="doc">Returns a vector containing the fields of a forma-neighbor-value.
</pre></div><div class="public" id="var-unpack-pixel-location"><h3>unpack-pixel-location</h3><div class="usage"><code>(unpack-pixel-location loc)</code></div><pre class="doc">Unpacks pixel-location object into a tuple.

(unpack-pixel-location
 {:spatial-res &quot;1000&quot;, :mod-h 28, :mod-v 9, :sample 1199, :line 10})
;=&gt; [&quot;1000&quot; 28 9 1199 10]</pre></div></div></body></html>