<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>forma.classify.logistic documentation</title></head><body><div id="header"><h1><a href="index.html">Forma 0.2.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3>Namespaces</h3><ul><li class="current"><a href="forma.classify.logistic.html">forma.classify.logistic</a></li><li><a href="forma.date-time.html">forma.date-time</a></li><li><a href="forma.hadoop.cli.html">forma.hadoop.cli</a></li><li><a href="forma.hadoop.io.html">forma.hadoop.io</a></li><li><a href="forma.hadoop.jobs.forma.html">forma.hadoop.jobs.forma</a></li><li><a href="forma.hadoop.jobs.modis.html">forma.hadoop.jobs.modis</a></li><li><a href="forma.hadoop.jobs.preprocess.html">forma.hadoop.jobs.preprocess</a></li><li><a href="forma.hadoop.jobs.scatter.html">forma.hadoop.jobs.scatter</a></li><li><a href="forma.hadoop.jobs.timeseries.html">forma.hadoop.jobs.timeseries</a></li><li><a href="forma.hadoop.pail.html">forma.hadoop.pail</a></li><li><a href="forma.hadoop.predicate.html">forma.hadoop.predicate</a></li><li><a href="forma.matrix.jblas.html">forma.matrix.jblas</a></li><li><a href="forma.matrix.utils.html">forma.matrix.utils</a></li><li><a href="forma.matrix.walk.html">forma.matrix.walk</a></li><li><a href="forma.postprocess.output.html">forma.postprocess.output</a></li><li><a href="forma.postprocess.select.html">forma.postprocess.select</a></li><li><a href="forma.reproject.html">forma.reproject</a></li><li><a href="forma.schema.html">forma.schema</a></li><li><a href="forma.source.fire.html">forma.source.fire</a></li><li><a href="forma.source.hdf.html">forma.source.hdf</a></li><li><a href="forma.source.rain.html">forma.source.rain</a></li><li><a href="forma.source.static.html">forma.source.static</a></li><li><a href="forma.source.tilesets.html">forma.source.tilesets</a></li><li><a href="forma.static.html">forma.static</a></li><li><a href="forma.testing.html">forma.testing</a></li><li><a href="forma.trends.analysis.html">forma.trends.analysis</a></li><li><a href="forma.trends.filter.html">forma.trends.filter</a></li><li><a href="forma.trends.stretch.html">forma.trends.stretch</a></li><li><a href="forma.utils.html">forma.utils</a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="forma.classify.logistic.html#var-beta-dict">beta-dict</a></li><li><a href="forma.classify.logistic.html#var-beta-increment">beta-increment</a></li><li><a href="forma.classify.logistic.html#var-beta-update">beta-update</a></li><li><a href="forma.classify.logistic.html#var-estimated-probabilities">estimated-probabilities</a></li><li><a href="forma.classify.logistic.html#var-initial-beta">initial-beta</a></li><li><a href="forma.classify.logistic.html#var-log-likelihood">log-likelihood</a></li><li><a href="forma.classify.logistic.html#var-logistic-beta-vector">logistic-beta-vector</a></li><li><a href="forma.classify.logistic.html#var-logistic-beta-wrap">logistic-beta-wrap</a></li><li><a href="forma.classify.logistic.html#var-logistic-prob">logistic-prob</a></li><li><a href="forma.classify.logistic.html#var-ridge-correction">ridge-correction</a></li><li><a href="forma.classify.logistic.html#var-score-seq">score-seq</a></li><li><a href="forma.classify.logistic.html#var-to-double-matrix">to-double-matrix</a></li><li><a href="forma.classify.logistic.html#var-total-log-likelihood">total-log-likelihood</a></li><li><a href="forma.classify.logistic.html#var-unpack-neighbors">unpack-neighbors</a></li></ul></div><div class="namespace-docs" id="content"><h2>forma.classify.logistic documentation</h2><pre class="doc"></pre><div class="public" id="var-beta-dict"><h3>beta-dict</h3><div class="usage"><code>(beta-dict beta-src)</code></div><pre class="doc">create dictionary of beta vectors
</pre></div><div class="public" id="var-beta-increment"><h3>beta-increment</h3><div class="usage"><code>(beta-increment info-mat scores rdg-cons)</code></div><pre class="doc">increment beta without ridge correction; NOTE: cannot refactor
DoubleMatrix/eye since it changes in memory, i.e., jBLAS objects
don't behave like clojure data structures</pre></div><div class="public" id="var-beta-update"><h3>beta-update</h3><div class="usage"><code>(beta-update beta-row label-row feature-mat rdg-cons)</code></div><pre class="doc">full beta update, including correction
</pre></div><div class="public" id="var-estimated-probabilities"><h3>estimated-probabilities</h3><div class="usage"><code>(estimated-probabilities label-seq training-features updated-features)</code></div><pre class="doc">returns the set of probabilities, after applying the parameter
values estimated over the training data; both `label-seq` and
`traning-features` reflect data over the training period and
`updated-features` reflect data through some interval, which could
be the end of the training period (for internal validataion) but is
most likely some interval thereafter</pre></div><div class="public" id="var-initial-beta"><h3>initial-beta</h3><div class="usage"><code>(initial-beta feature-mat)</code></div><pre class="doc">returns a vector of intial weights; this can be changed to reflect
the method of moments estimator as a starting point, but for now it
is fine to assume no knowledge about the betas.  The probabilities
start a 0.5 and are pushed to the 0 and 1 extremes as the likelihood
function is maximized.</pre></div><div class="public" id="var-log-likelihood"><h3>log-likelihood</h3><div class="usage"><code>(log-likelihood beta-seq label feature-seq)</code></div><pre class="doc">returns the log likelihood of a given pixel, conditional on its
label (0-1) and the probability of label equal to 1.</pre></div><div class="public" id="var-logistic-beta-vector"><h3>logistic-beta-vector</h3><div class="usage"><code>(logistic-beta-vector label-row feature-mat rdg-cons converge-threshold max-iter)</code></div><pre class="doc">return the estimated parameter vector; which is used, in turn, to
calculate the estimated probability of the binary label; the initial
beta-diff value is an arbitrarily large value.</pre></div><div class="public" id="var-logistic-beta-wrap"><h3>logistic-beta-wrap</h3><div class="usage"><code>(logistic-beta-wrap tuples)</code></div><pre class="doc">returns a vector of parameter coefficients.  note that this is
where the intercept is added (to the front of each stacked vector in
the feature matrix

TODO: The intercept is included in the feature vector for now, as a
kludge when we removed the hansen statistic.  When we include the
hansen stat, we will have to replace the feature-mat binding below
with a line that tacks on a 1 to each feature vector.
</pre></div><div class="public" id="var-logistic-prob"><h3>logistic-prob</h3><div class="usage"><code>(logistic-prob beta-mat features-mat)</code></div><pre class="doc">.dot returns a double, which needs to be converted to a
DoubleMatrix for logistic-fn</pre></div><div class="public" id="var-ridge-correction"><h3>ridge-correction</h3><div class="usage"><code>(ridge-correction info-mat scores rdg-cons)</code></div><pre class="doc">returns a vector of corrections to the beta-update, given the
current iteration of the information matrix and score sequence. The
vector a is analogous to f(rdg_cons) = a*rdg_cons + b, and we are
interested in the correction factor that is calculated as follows:
Let v = rdg_cons.  Then we originally assume that f(0) = f(v)
[equivalent to no added constant along the diagnol], which may not
be correct.  A better approximation is f(0) - b, where b = f(v) -
a*v.  Then, correction = f(0) - b = f(v) - f(v) + a*v = a*v.</pre></div><div class="public" id="var-score-seq"><h3>score-seq</h3><div class="usage"><code>(score-seq beta labels feature-mat)</code></div><pre class="doc">returns the score for each parameter 
</pre></div><div class="public" id="var-to-double-matrix"><h3>to-double-matrix</h3><div class="usage"><code>(to-double-matrix mat)</code></div><pre class="doc">returns a DoubleMatrix instance for use with jBLAS functions
</pre></div><div class="public" id="var-total-log-likelihood"><h3>total-log-likelihood</h3><div class="usage"><code>(total-log-likelihood beta-seq label-seq feature-mat)</code></div><pre class="doc">returns the total log likelihood for a group of pixels; input
labels and features for the group of pixels, aligned correctly so
that the first label and feature correspond to the first pixel.</pre></div><div class="public" id="var-unpack-neighbors"><h3>unpack-neighbors</h3><div class="usage"><code>(unpack-neighbors neighbor-val)</code></div><pre class="doc">Returns a vector containing the fields of a forma-neighbor-value.
</pre></div></div></body></html>